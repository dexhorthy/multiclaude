{
  "description": "Test fixture defining expected project structures for different scenarios",
  "scenarios": {
    "basic_init": {
      "description": "Basic init in empty directory",
      "expected_files": [
        ".promptx/personas/agent-developer.md",
        ".promptx/personas/agent-code-reviewer.md",
        ".promptx/personas/agent-merger.md",
        ".promptx/personas/agent-multiplan-manager.md",
        ".promptx/personas/agent-rebaser.md",
        "CLAUDE.staged.md",
        "Makefile"
      ],
      "expected_directories": [
        ".promptx",
        ".promptx/personas"
      ]
    },
    "existing_makefile": {
      "description": "Init in directory with existing Makefile",
      "setup_files": [
        "Makefile"
      ],
      "expected_files": [
        ".promptx/personas/agent-developer.md",
        ".promptx/personas/agent-code-reviewer.md",
        ".promptx/personas/agent-merger.md",
        ".promptx/personas/agent-multiplan-manager.md",
        ".promptx/personas/agent-rebaser.md",
        "CLAUDE.staged.md",
        "Makefile"
      ],
      "expected_directories": [
        ".promptx",
        ".promptx/personas"
      ],
      "notes": "Existing Makefile should be preserved"
    },
    "existing_promptx": {
      "description": "Init in directory with existing .promptx",
      "setup_directories": [
        ".promptx",
        ".promptx/personas"
      ],
      "setup_files": [
        ".promptx/existing-file.txt"
      ],
      "expected_files": [
        ".promptx/personas/agent-developer.md",
        ".promptx/personas/agent-code-reviewer.md",
        ".promptx/personas/agent-merger.md",
        ".promptx/personas/agent-multiplan-manager.md",
        ".promptx/personas/agent-rebaser.md",
        ".promptx/existing-file.txt",
        "CLAUDE.staged.md",
        "Makefile"
      ],
      "expected_directories": [
        ".promptx",
        ".promptx/personas"
      ],
      "notes": "Existing .promptx contents should be preserved"
    }
  },
  "validation_rules": {
    "persona_files": {
      "min_size_bytes": 100,
      "required_patterns": [
        "# ",
        "## ",
        "workflow",
        "step"
      ]
    },
    "claude_staged": {
      "required_sections": [
        "# AI Assistant Instructions",
        "## ðŸš¨ MANDATORY PERSONA SELECTION",
        "## How to Choose Your Persona",
        "## Project Context",
        "## Core Principles",
        "## File Structure Reference",
        "## Common Commands",
        "## CRITICAL REMINDER"
      ],
      "required_persona_references": [
        "agent-developer.md",
        "agent-code-reviewer.md",
        "agent-merger.md",
        "agent-multiplan-manager.md",
        "agent-rebaser.md"
      ]
    },
    "makefile": {
      "required_targets": [
        "setup",
        "teardown"
      ],
      "required_phony": [
        "setup",
        "teardown"
      ]
    }
  }
}